# Save as main.py
from fastapi import FastAPI
from pydantic import BaseModel
import random

app = FastAPI()

class CallData(BaseModel):
    phone_number: str
    location: str
    metadata: dict  # Includes carrier info, frequency, etc.

@app.get("/")
def home():
    return {"status": "AI Scam Detector Online"}

@app.post("/analyze-call")
async def analyze_call(data: CallData):
    # Mock AI Logic: In reality, this would use your ML model
    risk_score = random.randint(0, 100)
    
    # Simple logic: If number is hidden or high frequency from overseas
    is_scam = risk_score > 75
    
    return {
        "phone_number": data.phone_number,
        "risk_score": f"{risk_score}%",
        "action": "BLOCK" if is_scam else "ALLOW",
        "reason": "Suspicious pattern detected" if is_scam else "Verified Caller"
    }

if __name__ == "__main__":
    import uvicorn
    uvicorn.run(app, host="0.0.0.0", port=8000)
